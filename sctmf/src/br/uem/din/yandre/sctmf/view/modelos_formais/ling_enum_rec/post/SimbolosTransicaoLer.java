/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * SimbolosTransicaoLer.java
 *
 * Created on 18/11/2009, 12:01:03
 */
package br.uem.din.yandre.sctmf.view.modelos_formais.ling_enum_rec.post;

import br.uem.din.yandre.sctmf.model.pojo.Simbolo;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.HashSet;
import java.util.Set;

/**
 *
 * @author Administrador
 */
public class SimbolosTransicaoLer extends javax.swing.JDialog {

    private PostGUI post;
    private String retorno = null;
    private Set<Simbolo> simbolos = new HashSet<Simbolo>();

    /** Creates new form SimbolosTransicaoLer */
    public SimbolosTransicaoLer(java.awt.Frame parent, boolean modal, PostGUI post) {
        super(parent, modal);
        initComponents();
        this.post = post;
        posInitComponents();
        this.glSimbolos.addItem('#');
        this.glSimbolos.addItem('\u03BB');
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        pBotoes = new javax.swing.JPanel();
        bOk = new javax.swing.JButton();
        pMain = new javax.swing.JPanel();
        glSimbolos = new br.uem.din.yandre.sctmf.view.components.GenericJList();
        addRemButtonsSimTrans = new br.uem.din.yandre.sctmf.view.components.AddRemButtonsPanel();
        glSimbolosTransicao = new br.uem.din.yandre.sctmf.view.components.GenericJList();
        pLabel = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        setTitle(org.openide.util.NbBundle.getMessage(SimbolosTransicaoLer.class, "SimbolosTransicaoLer.title_1")); // NOI18N
        setAlwaysOnTop(true);
        setResizable(false);

        bOk.setText(org.openide.util.NbBundle.getMessage(SimbolosTransicaoLer.class, "SimbolosTransicaoLer.bOk.text_1")); // NOI18N
        bOk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bOkActionPerformed(evt);
            }
        });
        pBotoes.add(bOk);

        getContentPane().add(pBotoes, java.awt.BorderLayout.SOUTH);

        pMain.setPreferredSize(new java.awt.Dimension(300, 200));
        pMain.setLayout(new java.awt.GridBagLayout());
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.ipadx = 10;
        gridBagConstraints.ipady = 100;
        gridBagConstraints.insets = new java.awt.Insets(20, 20, 20, 10);
        pMain.add(glSimbolos, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        pMain.add(addRemButtonsSimTrans, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.ipadx = 10;
        gridBagConstraints.ipady = 100;
        gridBagConstraints.insets = new java.awt.Insets(20, 10, 20, 20);
        pMain.add(glSimbolosTransicao, gridBagConstraints);

        getContentPane().add(pMain, java.awt.BorderLayout.CENTER);

        jLabel1.setText(org.openide.util.NbBundle.getMessage(SimbolosTransicaoLer.class, "SimbolosTransicaoLer.jLabel1.text")); // NOI18N
        pLabel.add(jLabel1);

        getContentPane().add(pLabel, java.awt.BorderLayout.NORTH);

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-350)/2, (screenSize.height-216)/2, 350, 216);
    }// </editor-fold>//GEN-END:initComponents

    private void bOkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bOkActionPerformed
        sair();
}//GEN-LAST:event_bOkActionPerformed
    /**
     * @param args the command line arguments
     */
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private br.uem.din.yandre.sctmf.view.components.AddRemButtonsPanel addRemButtonsSimTrans;
    private javax.swing.JButton bOk;
    private br.uem.din.yandre.sctmf.view.components.GenericJList glSimbolos;
    private br.uem.din.yandre.sctmf.view.components.GenericJList glSimbolosTransicao;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel pBotoes;
    private javax.swing.JPanel pLabel;
    private javax.swing.JPanel pMain;
    // End of variables declaration//GEN-END:variables

    private void sair() {
        if (glSimbolosTransicao.getAllItens().size() > 0) {
            StringBuffer sb = new StringBuffer();
            for (Object o : glSimbolosTransicao.getAllItens()) {
                sb.append((Character) o + ",");
            }
            System.out.println("s " + sb);

            setRetorno(sb.toString());
            glSimbolosTransicao.removeAllItens();
            this.dispose();
        }
    }

    private void observer(Simbolo s, boolean b) {
        if (b) {
            this.glSimbolos.addItem(s.getNome());
        } else {
            this.glSimbolos.removeItem(s.getNome());
        }
    }

    private void posInitComponents() {

        this.addRemButtonsSimTrans.getBAdd().addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                addActionAlf();
            }
        });

        this.addRemButtonsSimTrans.getBRemove().addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                removeActionAlf();
            }
        });

        for (Simbolo s : post.getSimbolos()) {
            this.glSimbolos.addItem(s.getNome());
            this.simbolos.add(s);
        }

    }

    private void removeActionAlf() {
        for (Object o : this.glSimbolosTransicao.removeItens()) {
            this.glSimbolos.addItem((Character) o);
        }
//          this.gui.removeSimbolo(
        //              new Simbolo((Character)o), 0);
    }

    private void addActionAlf() {
        for (Object o : this.glSimbolos.removeItens()) {
            this.glSimbolosTransicao.addItem((Character) o);
        }
        //this.gui.addSimbolo(simbAlf, 0);
    }

    public String getRetorno() {
        return retorno;
    }

    public void setRetorno(String retorno) {
        this.retorno = retorno;
    }

    @Override
    public void setVisible(boolean b) {
        for (Simbolo s : post.getSimbolos()) {
            if ((!this.simbolos.contains(s))) {
                this.glSimbolos.addItem(s.getNome());
            }
        }
        super.setVisible(b);

    }
}
