/*
 * ApGUI.java
 *
 * Created on 4 de Junho de 2007, 21:13
 */

package cassolato.rafael.sctmf.view.modelos_formais.ling_liv_contex.ap;

import cassolato.rafael.sctmf.model.pojo.AP;
import cassolato.rafael.sctmf.model.pojo.Estado;
import cassolato.rafael.sctmf.model.pojo.ModeloFormal;
import cassolato.rafael.sctmf.model.pojo.Simbolo;
import java.util.Set;

/**
 *
 * @author  Cassolato
 */
public class ApGUI 
        extends cassolato.rafael.sctmf.view.modelos_formais.ModeloFormalGUI 
        implements cassolato.rafael.sctmf.view.components.CEstado {
    
    private AP ap = new AP();
    private CadAlfAP cadAlf = new CadAlfAP();
    private CadEstSimIniAP cadESIP = new CadEstSimIniAP(this);
    private CadFunTransAP cadFunTrans = new CadFunTransAP();
    private ValSeqAP valSeq = new ValSeqAP();
    
    /** Creates new form BeanForm */
    public ApGUI() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Código Gerado ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jLabel2 = new javax.swing.JLabel();
        tpAp = new javax.swing.JTabbedPane();
        pCadAlfabeto = new javax.swing.JPanel();
        pCadEstSimIni = new javax.swing.JPanel();
        pCadTrans = new javax.swing.JPanel();
        pValSeq = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();

        setLayout(new java.awt.BorderLayout());

        jLabel2.setPreferredSize(new java.awt.Dimension(0, 10));
        add(jLabel2, java.awt.BorderLayout.SOUTH);

        pCadAlfabeto.setLayout(new javax.swing.BoxLayout(pCadAlfabeto, javax.swing.BoxLayout.X_AXIS));

        pCadAlfabeto.add(this.cadAlf);
        tpAp.addTab("Alfabeto", pCadAlfabeto);

        pCadEstSimIni.setLayout(new javax.swing.BoxLayout(pCadEstSimIni, javax.swing.BoxLayout.X_AXIS));

        pCadEstSimIni.add(this.cadESIP);
        pCadEstSimIni.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                pCadEstSimIniComponentShown(evt);
            }
        });

        tpAp.addTab("Est. e Sim. Ini(s)", pCadEstSimIni);

        pCadTrans.setLayout(new javax.swing.BoxLayout(pCadTrans, javax.swing.BoxLayout.X_AXIS));

        pCadTrans.add(this.cadFunTrans);
        pCadTrans.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                pCadTransComponentShown(evt);
            }
        });

        tpAp.addTab("Fun. de Transi\u00e7\u00e3o", pCadTrans);

        pValSeq.setLayout(new java.awt.BorderLayout());

        pValSeq.add(this.valSeq, java.awt.BorderLayout.CENTER);
        pValSeq.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                pValSeqComponentShown(evt);
            }
        });

        jLabel1.setPreferredSize(new java.awt.Dimension(0, 10));
        pValSeq.add(jLabel1, java.awt.BorderLayout.NORTH);

        tpAp.addTab("Val. Sequ\u00eancia", pValSeq);

        add(tpAp, java.awt.BorderLayout.CENTER);
        tpAp.getAccessibleContext().setAccessibleName("");

    }// </editor-fold>//GEN-END:initComponents

    private void pCadEstSimIniComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_pCadEstSimIniComponentShown
        this.cadESIP.setSimbolosCbTopoPilha(
                this.cadAlf.getSimbsAfabetoPilha());
    }//GEN-LAST:event_pCadEstSimIniComponentShown

    private void pValSeqComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_pValSeqComponentShown
        this.valSeq.observerValSeq((AP)getModeloFormal());
    }//GEN-LAST:event_pValSeqComponentShown
    
    private void pCadTransComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_pCadTransComponentShown
        this.cadFunTrans.observer(
                this.cadAlf.getSimbsAfabeto(), 
                this.cadAlf.getSimbsAfabetoPilha(), 
                this.cadESIP.getEstados());
    }//GEN-LAST:event_pCadTransComponentShown
        
    public void setModeloFormal(ModeloFormal mf) {
    }

    public ModeloFormal getModeloFormal() {
        ap = new AP();
        // Add os simbolos do alfabeto
        ap.addAllSimbolos(this.cadAlf.getSimbsAfabeto());
        
        // Add os simbolos do alfabeto da pilha
        ap.addAllSimbolosPilha(this.cadAlf.getSimbsAfabetoPilha());
        
        // Add os Estados
        ap.addAllEstados(this.cadESIP.getEstados());
        
        // Add Estado Inicial
        Estado e = this.cadESIP.getEstadoInicial();
        if(e!=null)
            ap.setEstadoInicial(e);
        
        // Add Simbolo do topo da pilha
        Simbolo s =  this.cadESIP.getSimbTopoPilha();
        if(s!=null)
            ap.setTopoPilha(s);
        
        // Add Transicoes
        ap.addAllTransicoes(this.cadFunTrans.getTransicoes());
        
        return ap;
    }
        
    public void addEstado(Estado estado) {
    }

    public void remEstados(Set<Estado> estados) {
    }

    public void removeAllItens() {
    }
       
    // Declaração de variáveis - não modifique//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel pCadAlfabeto;
    private javax.swing.JPanel pCadEstSimIni;
    private javax.swing.JPanel pCadTrans;
    private javax.swing.JPanel pValSeq;
    private javax.swing.JTabbedPane tpAp;
    // Fim da declaração de variáveis//GEN-END:variables
   
}